{% extends 'layout.html' %}

{% block head_title %}Foro{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Publicaciones recientes</h2>
    <a href="{{ url_for('create_post') }}" class="btn btn-primary">+ Crear nuevo post</a>
</div>

{% if posts %}
    <ul class="list-group">
        {% for post in posts %}
            <li class="list-group-item">
                <h5>
                    <a href="{{ url_for('post_detail', post_id=post.id) }}">{{ post.title }}</a>
                </h5>
                <p class="mb-1">
                    <small>
                        Por <strong>{{ post.author.username }}</strong> |
                        {{ post.created_at.strftime('%d/%m/%Y %H:%M') }}
                        {% if post.category %}
                            | Categoría: <span class="badge badge-info">{{ post.category.name }}</span>
                        {% endif %}
                        | Comentarios: {{ post.comments|length }}
                    </small>
                </p>
                <p class="mb-0">{{ post.content[:150] }}{% if post.content|length > 150 %}...{% endif %}</p>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <div class="alert alert-info">
        No hay publicaciones aún. Sé el primero en <a href="{{ url_for('create_post') }}">crear una</a>.
    </div>
{% endif %}
{% endblock %}
